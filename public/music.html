<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Jarvis Music Player</title>
<style>
:root{
  --bg:#0b0f12;
  --card:#0f1416;
  --accent:#1db954;
  --muted:#9aa6a1;
  --glass: rgba(255,255,255,0.03);
}
body{
  margin:0;
  font-family:'Segoe UI',sans-serif;
  background:var(--bg);
  color:#e9f2ef;
}
#playerContainer{
  display:flex;
  flex-direction:column;
  align-items:center;
  padding:20px;
}
#coverImg{
  width:200px;
  height:200px;
  border-radius:15px;
  margin-bottom:15px;
  object-fit:cover;
}
#trackTitle{ font-weight:700; margin-bottom:5px; }
#trackArtist{ font-size:14px; color:var(--muted); margin-bottom:15px; }
#ytPlayer{ width:560px; height:315px; border:none; margin-bottom:15px; border-radius:12px; }

.player-controls{
  display:flex;
  align-items:center;
  gap:8px;
  margin-bottom:15px;
}
.player-controls .btn{
  background:var(--glass);
  border:none;
  color:#e9f2ef;
  padding:10px 12px;
  border-radius:8px;
  cursor:pointer;
  font-size:16px;
}
.player-controls .play{ font-size:18px; }
.progress{
  flex:1;
  height:6px;
  background:var(--muted);
  border-radius:3px;
  overflow:hidden;
  margin-left:10px;
  margin-right:10px;
}
.progress i{
  display:block;
  height:100%;
  width:0%;
  background:var(--accent);
}
#waveContainer{
  display:flex;
  align-items:flex-end;
  gap:3px;
  margin-bottom:20px;
  height:40px;
}
.wave-bar{
  width:5px;
  background:var(--accent);
  height:20%;
  animation:wave 1s linear infinite;
  animation-play-state:paused;
  transform-origin:bottom;
}
@keyframes wave{
  0%{transform:scaleY(0.2);}
  50%{transform:scaleY(1);}
  100%{transform:scaleY(0.2);}
}

/* song grid */
#songGrid{
  display:grid;
  grid-template-columns:repeat(auto-fill,minmax(150px,1fr));
  gap:10px;
  padding:15px;
}
.song-card{
  background:var(--card);
  border-radius:10px;
  padding:10px;
  cursor:pointer;
  position:relative;
}
.song-card.playing{
  border:2px solid var(--accent);
}
.song-card img{
  width:100%;
  border-radius:8px;
}
.add-to-pl-btn{
  position:absolute;
  top:8px;
  right:8px;
  background:var(--accent);
  border:none;
  color:#fff;
  border-radius:6px;
  cursor:pointer;
  font-weight:700;
  padding:2px 6px;
}
#playlistArea{
  margin-top:20px;
  padding:10px;
}
.pl-btn{
  display:block;
  width:100%;
  margin-bottom:5px;
  padding:8px;
  border:none;
  background:var(--glass);
  color:#e9f2ef;
  cursor:pointer;
  border-radius:6px;
  text-align:left;
}
.highlight{
  animation: highlightAnim 1s ease;
}
@keyframes highlightAnim{
  0%{ background-color: rgba(65,105,225,0.3);}
  50%{ background-color: rgba(65,105,225,0.1);}
  100%{ background-color: transparent;}
}
</style>
</head>
<body>

<div id="playerContainer">
  <img id="coverImg" src="" alt="Cover">
  <div id="trackTitle">Track Title</div>
  <div id="trackArtist">Artist</div>
  <iframe id="ytPlayer" src="" allow="autoplay; encrypted-media" allowfullscreen></iframe>

  <div class="player-controls">
    <button class="btn" id="prevBtn">‚èÆ</button>
    <button class="btn" id="rewBtn" title="Rewind 10s">‚è™</button>
    <button class="btn play" id="playBtn">‚ñ∂</button>
    <button class="btn" id="fwdBtn" title="Forward 10s">‚è©</button>
    <button class="btn" id="nextBtn">‚è≠</button>
    <button class="btn" id="playlistBtn" title="Open Playlist">üìÇ</button>
    <div class="progress"><i id="progressFill"></i></div>
  </div>

  <div id="waveContainer"></div>
</div>

<div id="songGrid">
  <!-- dynamically filled by music.js -->
</div>

<div id="playlistArea">
  <!-- playlists rendered by music.js -->
</div>

<div id="sidebarPlaylists" style="padding:10px;"></div>

<script src="music.js"></script>
<script>
// hook playlist button
const playlistBtn = document.getElementById("playlistBtn");
playlistBtn?.addEventListener("click", () => {
  const area = document.getElementById("playlistArea");
  if (area){
    area.scrollIntoView({behavior:"smooth", block:"center"});
    area.classList.add("highlight");
    setTimeout(()=>area.classList.remove("highlight"),1000);
  }
});

// hook prev/next
document.getElementById("prevBtn")?.addEventListener("click",()=>{ if(window.prev) prev(); });
document.getElementById("nextBtn")?.addEventListener("click",()=>{ if(window.next) next(); });

// optional: simple rewind/forward
document.getElementById("rewBtn")?.addEventListener("click",()=>{
  const player = document.getElementById("ytPlayer");
  if(player) player.contentWindow.postMessage('{"event":"command","func":"seekBy","args":[-10]}','*');
});
document.getElementById("fwdBtn")?.addEventListener("click",()=>{
  const player = document.getElementById("ytPlayer");
  if(player) player.contentWindow.postMessage('{"event":"command","func":"seekBy","args":[10]}','*');
});
</script>

</body>
</html>
