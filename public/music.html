<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Music Player â€” Spotify Style</title>
<link rel="stylesheet" href="music.css" />

<style>
/* your existing styles remain untouched... */
</style>

</head>
<body>

<!-- NAVBAR START (EMOJIS ADDED) -->
<nav>
  <div class="hamburger" id="hamburger">
    <div></div>
    <div></div>
    <div></div>
  </div>

  <div class="nav-links" id="navLinks">
    <a href="index.html" class="chat">ğŸ¤– Chat-bot</a>
    <a href="bots.html" class="discord">ğŸ’¬ Discord Bots</a>
    <a href="image.html" class="image">ğŸ–¼ï¸ Image Gen</a>
    <a href="music.html" class="music">ğŸµ Music</a>
    <a href="video.html" class="video">ğŸ¬ Video Gen</a>
    <a href="home-automation.html" class="home">ğŸ  Home Automation</a>
  </div>
</nav>
<!-- NAVBAR END -->





<!-- FIXED SIDEBAR (EMOJIS ADDED) -->
<div id="sidebar" class="sidebar">
  <h2>ğŸ¼ Browse</h2>

  <a href="#top" class="item">ğŸ”¥ Trending Songs</a>
  <a href="#playlistSection" class="item">ğŸ“‚ Playlists</a>
  <a href="#recent" class="item">â³ Recently Played</a>
  <a href="#fav" class="item">â¤ï¸ Favourites</a>
</div>






<!-- MAIN CONTENT -->
<div class="container">
  <h1 style="margin-bottom:10px;font-size:27px">ğŸµ Now Playing</h1>

  <div class="player-card">

    <div class="song-img big" id="bottomSongImg"></div>

    <div style="flex:1;display:flex;flex-direction:column;align-items:center;gap:8px">
      <div id="bottomSongName" class="song-name"></div>
      <div id="bottomArtist" class="artist"></div>

      <!-- ADD TO PLAYLIST BUTTON (NEW) -->
      <button id="addToPlaylistBtn" class="add-playlist-btn">
        â• Add to Playlist
      </button>
    </div>

  </div>


  <!-- PLAYER BOTTOM CONTROLS -->
  <div class="bottom-bar">
    <div style="display:flex;flex-direction:column;align-items:center;flex:1">
      <div class="player-controls">
        <button class="btn" id="prevBtn">â®ï¸</button>
        <button class="btn" id="rewBtn" title="Rewind 10s">âª</button>
        <button class="btn play" id="playBtn">â¯ï¸</button>
        <button class="btn" id="fwdBtn" title="Forward 10s">â©</button>
        <button class="btn" id="nextBtn">â­ï¸</button>

        <div class="progress"><i id="progressFill"></i></div>
      </div>

      <div id="waveContainer" class="wave"></div>
    </div>

    <div style="width:220px;display:flex;align-items:center;justify-content:flex-end;gap:12px">
      <div style="font-size:13px;color:var(--muted)">JARVIS</div>
    </div>
  </div>


  <!-- PLAYLIST SECTION -->
  <h2 id="playlistSection" style="margin-top:35px">ğŸ“‚ Your Playlist</h2>
  <div id="playlistContainer" class="playlist-box"></div>

</div>





<script src="music.js"></script>

<script>
/* HAMBURGER TOGGLE */
const hamburger = document.getElementById("hamburger");
const navLinks = document.getElementById("navLinks");
const sidebar = document.getElementById("sidebar");

hamburger?.addEventListener("click", () => {
  navLinks.classList.toggle("active");
  hamburger.classList.toggle("toggle");
  if (sidebar) sidebar.classList.toggle("open");
});



/* ------------------------------ */
/* ADD TO PLAYLIST FUNCTIONALITY */
/* ------------------------------ */

let playlist = [];

// your top songs already call: playSong(index)
// so now we capture the CURRENT SONG:

document.getElementById("addToPlaylistBtn").addEventListener("click", () => {
  if (!window.currentSong) return;

  // avoid duplicates
  if (!playlist.includes(window.currentSong)) {
    playlist.push(window.currentSong);
    updatePlaylistUI();
  }
});

function updatePlaylistUI() {
  const box = document.getElementById("playlistContainer");
  box.innerHTML = "";

  playlist.forEach((song, index) => {
    const item = document.createElement("div");
    item.className = "playlist-item";

    item.innerHTML = `
      <img src="${song.img}" class="playlist-img">
      <div class="playlist-info">
        <div class="name">${song.name}</div>
        <div class="artist">${song.artist}</div>
      </div>

      <button class="play-small" onclick="playPlaylistSong(${index})">â–¶ï¸</button>
    `;

    box.appendChild(item);
  });
}

function playPlaylistSong(ix) {
  const song = playlist[ix];
  window.playFromData(song);
}
</script>

</body>
</html>
